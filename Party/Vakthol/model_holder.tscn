[gd_scene load_steps=23 format=3 uid="uid://cnnbqshdbaks4"]

[ext_resource type="PackedScene" uid="uid://c8sbeheqi10fl" path="res://Party/Vakthol/vakthol.glb" id="1_ypitp"]
[ext_resource type="PackedScene" uid="uid://yhwlyfetwmre" path="res://Party/Vakthol/vakthol_axe.glb" id="2_nf168"]
[ext_resource type="Script" path="res://Dialogue/0Core/DialogueInteraction.cs" id="3_2wb2x"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_snhpk"]
radius = 0.25

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_wk5t4"]
animation = &"Idle"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_y612c"]
animation = &"Run"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_jbo8h"]
animation = &"Walk"

[sub_resource type="AnimationNodeBlendSpace1D" id="AnimationNodeBlendSpace1D_10gv5"]
blend_point_0/node = SubResource("AnimationNodeAnimation_wk5t4")
blend_point_0/pos = -1.0
blend_point_1/node = SubResource("AnimationNodeAnimation_y612c")
blend_point_1/pos = 1.0
blend_point_2/node = SubResource("AnimationNodeAnimation_jbo8h")
blend_point_2/pos = 0.0

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_w4spe"]
animation = &"Hit"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_0b1px"]
animation = &"Death"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_4pvdr"]
animation = &"Attack"

[sub_resource type="AnimationNodeOneShot" id="AnimationNodeOneShot_4n146"]

[sub_resource type="AnimationNodeBlendSpace1D" id="AnimationNodeBlendSpace1D_joo1s"]

[sub_resource type="AnimationNodeOneShot" id="AnimationNodeOneShot_trhvt"]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_tpk76"]
animation = &"CombatIdle"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_xmeum"]
animation = &"CombatActive"

[sub_resource type="AnimationNodeBlendSpace1D" id="AnimationNodeBlendSpace1D_7kcpt"]
blend_point_0/node = SubResource("AnimationNodeAnimation_tpk76")
blend_point_0/pos = -1.0
blend_point_1/node = SubResource("AnimationNodeAnimation_xmeum")
blend_point_1/pos = 1.0

[sub_resource type="AnimationNodeTimeSeek" id="AnimationNodeTimeSeek_555df"]

[sub_resource type="AnimationNodeBlendTree" id="AnimationNodeBlendTree_aj0br"]
graph_offset = Vector2(-159.132, 58.7947)
nodes/Animation/node = SubResource("AnimationNodeAnimation_4pvdr")
nodes/Animation/position = Vector2(0, 80)
"nodes/Animation 2/node" = SubResource("AnimationNodeAnimation_w4spe")
"nodes/Animation 2/position" = Vector2(180, 180)
"nodes/Animation 3/node" = SubResource("AnimationNodeAnimation_0b1px")
"nodes/Animation 3/position" = Vector2(500, 420)
nodes/Attack/node = SubResource("AnimationNodeOneShot_4n146")
nodes/Attack/position = Vector2(200, -80)
nodes/BlendSpace1D/node = SubResource("AnimationNodeBlendSpace1D_joo1s")
nodes/BlendSpace1D/position = Vector2(273.574, 323.382)
nodes/Hit/node = SubResource("AnimationNodeOneShot_trhvt")
nodes/Hit/position = Vector2(460, 40)
nodes/IdleOrActive/node = SubResource("AnimationNodeBlendSpace1D_7kcpt")
nodes/IdleOrActive/position = Vector2(-20, -60)
nodes/TimeSeek/node = SubResource("AnimationNodeTimeSeek_555df")
nodes/TimeSeek/position = Vector2(708.412, 223.53)
nodes/output/position = Vector2(840, 120)
node_connections = [&"output", 0, &"Hit", &"Attack", 0, &"IdleOrActive", &"Attack", 1, &"Animation", &"Hit", 0, &"Attack", &"Hit", 1, &"Animation 2"]

[sub_resource type="AnimationNodeBlend2" id="AnimationNodeBlend2_wvbys"]

[sub_resource type="AnimationNodeBlendTree" id="AnimationNodeBlendTree_5c7fh"]
graph_offset = Vector2(-333.199, -49.5546)
nodes/BasicMovement/node = SubResource("AnimationNodeBlendSpace1D_10gv5")
nodes/BasicMovement/position = Vector2(40, -20)
nodes/Combat/node = SubResource("AnimationNodeBlendTree_aj0br")
nodes/Combat/position = Vector2(40, 140)
nodes/CombatControl/node = SubResource("AnimationNodeBlend2_wvbys")
nodes/CombatControl/position = Vector2(260, 60)
nodes/output/position = Vector2(460, 100)
node_connections = [&"output", 0, &"CombatControl", &"CombatControl", 0, &"BasicMovement", &"CombatControl", 1, &"Combat"]

[sub_resource type="BoxShape3D" id="BoxShape3D_q3a1p"]
size = Vector3(1, 2, 1)

[node name="vakthol_holder" type="Node3D"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0)
shape = SubResource("CapsuleShape3D_snhpk")

[node name="Model" parent="." instance=ExtResource("1_ypitp")]

[node name="AnimationTree" type="AnimationTree" parent="."]
tree_root = SubResource("AnimationNodeBlendTree_5c7fh")
anim_player = NodePath("../Model/AnimationPlayer")
active = true
parameters/BasicMovement/blend_position = 0.0
parameters/Combat/Attack/active = false
parameters/Combat/Attack/internal_active = false
parameters/Combat/Attack/request = 0
parameters/Combat/BlendSpace1D/blend_position = 0
parameters/Combat/Hit/active = false
parameters/Combat/Hit/internal_active = false
parameters/Combat/Hit/request = 0
parameters/Combat/IdleOrActive/blend_position = -1.0
parameters/Combat/TimeSeek/seek_request = -1.0
parameters/CombatControl/blend_amount = 1.0

[node name="BackAnchor" type="Node3D" parent="."]
transform = Transform3D(0.87339, -0.487022, 0, 0.487022, 0.87339, 0, 0, 0, 1, 0.416, -0.5, -0.129)

[node name="IdleCombatAnchor" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, -4.37114e-08, -1, 0, 1, -4.37114e-08, 0.0211008, 0.0529301, -1.23596)

[node name="ActiveCombatAnchor" type="Node3D" parent="."]
transform = Transform3D(0.251531, 5.73318e-05, -0.967849, -0.967439, -0.0291096, -0.251426, -0.0281881, 0.999576, -0.00726648, 0.029447, 0.055098, -0.517589)

[node name="Weapon" parent="." instance=ExtResource("2_nf168")]

[node name="NavigationAgent3D" type="NavigationAgent3D" parent="."]
path_desired_distance = 0.5
target_desired_distance = 0.5

[node name="DialogueHolder" type="Node3D" parent="."]
script = ExtResource("3_2wb2x")

[node name="DialogueBox" type="StaticBody3D" parent="."]
collision_layer = 4
input_ray_pickable = false

[node name="CollisionShape3D" type="CollisionShape3D" parent="DialogueBox"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.02305, 0)
shape = SubResource("BoxShape3D_q3a1p")

[node name="CameraPositioner" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.573, 0)

[node name="SecondaryAnchor" type="Node3D" parent="."]
transform = Transform3D(-0.158533, -0.487022, 0.858881, -0.0884016, 0.87339, 0.478932, -0.983388, 2.23517e-08, -0.181515, 0.303228, -0.2582, -0.144977)

[node name="SecondaryWeapon" type="Node3D" parent="."]
transform = Transform3D(-0.158533, -0.487022, 0.858881, -0.0884016, 0.87339, 0.478932, -0.983388, 2.23517e-08, -0.181515, 0.303228, -0.2582, -0.144977)
